{# templates/enseignant/listEnseignants.html.twig #}

{% extends 'base.html.twig' %}

{% block title %}Liste des Enseignants{% endblock %}

{% block body %}
    <h1>Liste des Enseignants</h1>

    {# Add button #}
    <div class="d-flex justify-content-between mb-3">

        {# Empty space to push the button to the right #}
        <div></div>

        {# Add link to add new Groupe Testeur #}
        <a href="{{ path('enseignant_add') }}" class="btn btn-primary">Ajouter</a>
    </div>

    {# Table to display Enseignants details #}
    <table id="enseignantsTable" class="table">
        <!-- Table header -->
        <thead>
        <tr>
            <th>ID</th>
            <th>Prénom</th>
            <th>Nom</th>
            <th>Email</th>
            <th>Etablissement</th>
            <th>Statut de validation</th>
            <th>Actions</th>
        </tr>
        </thead>
        <!-- Table body will be populated using JavaScript -->
        <tbody id="enseignantsTableBody">
        {% for enseignant in enseignants %}
            <tr>
                <td>{{ enseignant.getId() }}</td>
                <td>{{ enseignant.getFirstName() }}</td>
                <td>{{ enseignant.getLastName() }}</td>
                <td>{{ enseignant.getEmail() }}</td>
                <td>{{ enseignant.getEtablissement().getEtablissementName() }}</td>
                <td>
                    {% if enseignant.getIsValidated() %}
                        <span class="badge bg-success text-light">Validé</span>
                    {% else %}
                        <span class="badge bg-danger text-light">Non Validé</span>
                    {% endif %}
                </td>
                <td>
                    <a href="{{ path('enseignant_delete', {'id': enseignant.getId()}) }}" class="btn btn-secondary btn-sm">Edit</a>
                    <a href="{{ path('enseignant_delete', {'id': enseignant.getId()}) }}" class="btn btn-danger btn-sm">Delete</a>
                    <button class="btn btn-primary btn-sm" onclick="validateEnseignant({{ enseignant.getId() }})">Validate</button>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    {# Pagination control #}
    <div class="mb-3">
        <button class="btn btn-secondary" onclick="$('#enseignantsTable').DataTable().page('previous').draw(false)">Previous</button>
        <button class="btn btn-secondary" onclick="$('#enseignantsTable').DataTable().page('next').draw(false)">Next</button>
    </div>

    <script>
        // Function to initialize the table with values
        function initializeTable() {
            // Use DataTables to initialize the table
            $('#enseignantsTable').DataTable({
                // Your DataTables configuration options go here
            });
        }

        // Function to perform search
        function performSearch() {
            // Trigger DataTables search
            $('#enseignantsTable').DataTable().search($('#search').val()).draw();
        }

        // Function to validate Enseignant
        function validateEnseignant(enseignantId) {
            // Implement the logic to validate the Enseignant based on the enseignantId
            // You can use AJAX to send a request to your server for validation
            // After validation, you may want to reload the table or update the row accordingly
            alert('Validation logic goes here for Enseignant with ID: ' + enseignantId);
        }

        // Call initialization function when the page loads
        $(document).ready(initializeTable);
    </script>
{% endblock %}
